<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Software Genlock: test/vsync_test.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Software Genlock
   &#160;<span id="projectnumber">v2.0.0</span>
   </div>
   <div id="projectbrief">Digital Signage SW Library for adjusting VSYNC timings via MMIO PLL register modifications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('vsync__test_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vsync_test.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;<a class="el" href="vsyncalter_8h_source.html">vsyncalter.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="connection_8h_source.html">connection.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="message_8h_source.html">message.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="version_8h_source.html">version.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for vsync_test.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp__incl.png" border="0" usemap="#atest_2vsync__test_8cpp" alt=""/></div>
<map name="atest_2vsync__test_8cpp" id="atest_2vsync__test_8cpp">
<area shape="rect" title=" " alt="" coords="657,5,805,32"/>
<area shape="rect" title=" " alt="" coords="5,155,76,181"/>
<area shape="rect" title=" " alt="" coords="596,80,669,107"/>
<area shape="rect" title=" " alt="" coords="694,80,769,107"/>
<area shape="rect" href="vsyncalter_8h.html" title=" " alt="" coords="101,155,202,181"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="853,155,927,181"/>
<area shape="rect" title=" " alt="" coords="961,80,1032,107"/>
<area shape="rect" href="connection_8h.html" title=" " alt="" coords="425,80,531,107"/>
<area shape="rect" href="message_8h.html" title=" " alt="" coords="843,80,937,107"/>
<area shape="rect" href="version_8h.html" title=" " alt="" coords="1062,80,1145,107"/>
<area shape="rect" title=" " alt="" coords="857,229,923,256"/>
<area shape="rect" title=" " alt="" coords="520,155,591,181"/>
<area shape="rect" title=" " alt="" coords="615,155,717,181"/>
<area shape="rect" title=" " alt="" coords="741,155,828,181"/>
<area shape="rect" title=" " alt="" coords="227,155,356,181"/>
<area shape="rect" title=" " alt="" coords="381,155,495,181"/>
<area shape="rect" title=" " alt="" coords="951,155,1042,181"/>
<area shape="rect" title=" " alt="" coords="1165,155,1223,181"/>
<area shape="rect" title=" " alt="" coords="1066,155,1141,181"/>
</map>
</div>
</div>
<p><a href="vsync__test_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ef30c42cbc289d899a8be5d2d8f77d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a> ()</td></tr>
<tr class="memdesc:a2ef30c42cbc289d899a8be5d2d8f77d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the usage of the program.  <a href="vsync__test_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">More...</a><br /></td></tr>
<tr class="separator:a2ef30c42cbc289d899a8be5d2d8f77d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b58a2a7bc1057f428bb132a1f46fe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a39b58a2a7bc1057f428bb132a1f46fe7">server_close_signal</a> (int sig)</td></tr>
<tr class="memdesc:a39b58a2a7bc1057f428bb132a1f46fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function closes the server's socket.  <a href="vsync__test_8cpp.html#a39b58a2a7bc1057f428bb132a1f46fe7">More...</a><br /></td></tr>
<tr class="separator:a39b58a2a7bc1057f428bb132a1f46fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e5a18d6c45463c6e2f7a339229d807"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a76e5a18d6c45463c6e2f7a339229d807">client_close_signal</a> (int sig)</td></tr>
<tr class="memdesc:a76e5a18d6c45463c6e2f7a339229d807"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function closes the client's socket.  <a href="vsync__test_8cpp.html#a76e5a18d6c45463c6e2f7a339229d807">More...</a><br /></td></tr>
<tr class="separator:a76e5a18d6c45463c6e2f7a339229d807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d575aeb5e2785705d4383ffea88b270"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a2d575aeb5e2785705d4383ffea88b270">print_vsyncs</a> (char *<a class="el" href="classmsg.html">msg</a>, long *va, int sz)</td></tr>
<tr class="memdesc:a2d575aeb5e2785705d4383ffea88b270"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function prints out the last N vsyncs that the system has received either on its own or from another system. It will only print in DBG mnode.  <a href="vsync__test_8cpp.html#a2d575aeb5e2785705d4383ffea88b270">More...</a><br /></td></tr>
<tr class="separator:a2d575aeb5e2785705d4383ffea88b270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b625e8a9a83c76fb85606039a5051ad"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a7b625e8a9a83c76fb85606039a5051ad">find_avg</a> (long *va, int sz)</td></tr>
<tr class="memdesc:a7b625e8a9a83c76fb85606039a5051ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function finds the average of all the vertical syncs that have been provided by the primary system to the secondary.  <a href="vsync__test_8cpp.html#a7b625e8a9a83c76fb85606039a5051ad">More...</a><br /></td></tr>
<tr class="separator:a7b625e8a9a83c76fb85606039a5051ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f13cb2b111df5e72d2c977803a52ce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a30f13cb2b111df5e72d2c977803a52ce">do_msg</a> (int new_sockfd)</td></tr>
<tr class="memdesc:a30f13cb2b111df5e72d2c977803a52ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used by the server side to get last 10 vsyncs, send them to the client and receive an ACK from it. Once reveived, it terminates connection with the client.  <a href="vsync__test_8cpp.html#a30f13cb2b111df5e72d2c977803a52ce">More...</a><br /></td></tr>
<tr class="separator:a30f13cb2b111df5e72d2c977803a52ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b051595562e86bcc7ae070fc4f4f3a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a2b051595562e86bcc7ae070fc4f4f3a6">do_primary</a> (char *ptp_if)</td></tr>
<tr class="memdesc:a2b051595562e86bcc7ae070fc4f4f3a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes all the actions of the primary system which are to initialize the server, wait for any clients, dispatch a function to handle each client and then wait for another client to join until the user Ctrl+C's out.  <a href="vsync__test_8cpp.html#a2b051595562e86bcc7ae070fc4f4f3a6">More...</a><br /></td></tr>
<tr class="separator:a2b051595562e86bcc7ae070fc4f4f3a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4da81aa0bbd7eeb5c7094d4decd35d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#aaf4da81aa0bbd7eeb5c7094d4decd35d">do_secondary</a> (char *server_name_or_ip_addr, char *ptp_eth_address, int synchronize, int timestamps)</td></tr>
<tr class="memdesc:aaf4da81aa0bbd7eeb5c7094d4decd35d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes all the actions of the secondary system which are to initialize the client, receive the vsyncs from the server, send it an ack back, finds its own vsync, calculate the delta between the two and then synchronize its vsyncs to the primary systems.  <a href="vsync__test_8cpp.html#aaf4da81aa0bbd7eeb5c7094d4decd35d">More...</a><br /></td></tr>
<tr class="separator:aaf4da81aa0bbd7eeb5c7094d4decd35d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main function.  <a href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6eb3855acc3b4bd74652ede542006355"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classconnection.html">connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#a6eb3855acc3b4bd74652ede542006355">server</a></td></tr>
<tr class="separator:a6eb3855acc3b4bd74652ede542006355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa55937eddaa937c68b6bddd2655f4edd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classconnection.html">connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#aa55937eddaa937c68b6bddd2655f4edd">client</a></td></tr>
<tr class="separator:aa55937eddaa937c68b6bddd2655f4edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35bfa481fb24b59bf55f9547e474447"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsync__test_8cpp.html#ad35bfa481fb24b59bf55f9547e474447">client_done</a> = 0</td></tr>
<tr class="separator:ad35bfa481fb24b59bf55f9547e474447"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2ef30c42cbc289d899a8be5d2d8f77d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef30c42cbc289d899a8be5d2d8f77d0">&#9670;&nbsp;</a></span>usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the usage of the program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00046">46</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_cgraph.png" border="0" usemap="#avsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_cgraph" alt=""/></div>
<map name="avsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_cgraph" id="avsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_cgraph">
<area shape="rect" title="Prints the usage of the program." alt="" coords="5,5,67,32"/>
<area shape="rect" href="version_8h.html#a6ef921a348915285474cdcd5894c6d1c" title="Constructs a version string from major, minor, and patch numbers." alt="" coords="115,5,213,32"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph.png" border="0" usemap="#avsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph" id="avsync__test_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph">
<area shape="rect" title="Prints the usage of the program." alt="" coords="108,5,169,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="a39b58a2a7bc1057f428bb132a1f46fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39b58a2a7bc1057f428bb132a1f46fe7">&#9670;&nbsp;</a></span>server_close_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void server_close_signal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function closes the server's socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>- The signal that was received </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00067">67</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_cgraph.png" border="0" usemap="#avsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_cgraph" alt=""/></div>
<map name="avsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_cgraph" id="avsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_cgraph">
<area shape="rect" title="This function closes the server&#39;s socket." alt="" coords="5,31,156,57"/>
<area shape="rect" href="classconnection.html#a4b7a7d1ce6ab9f9de9113b59df911503" title="Closes a server&#39;s socket." alt="" coords="204,5,387,32"/>
<area shape="rect" href="vsyncalter_8h.html#a35dc013212b176f47265e64746fedc0d" title="This function uninitializes the library by closing devices and unmapping memory. It must be called at..." alt="" coords="232,56,359,83"/>
<area shape="rect" href="vsyncalter_8cpp.html#a6c3688799fc62d197fe8e3b25ba950cf" title="This function deallocates all members of the phy_enabled_list." alt="" coords="445,31,576,57"/>
<area shape="rect" href="mmio_8cpp.html#a103c86119a15e95de20a15b3b017def2" title="Unmap the memory range that was mapped during initialization." alt="" coords="435,81,587,108"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_icgraph.png" border="0" usemap="#avsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_icgraph" id="avsync__test_8cpp_a39b58a2a7bc1057f428bb132a1f46fe7_icgraph">
<area shape="rect" title="This function closes the server&#39;s socket." alt="" coords="252,5,403,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a2b051595562e86bcc7ae070fc4f4f3a6" title="This function takes all the actions of the primary system which are to initialize the server,..." alt="" coords="108,5,204,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="a76e5a18d6c45463c6e2f7a339229d807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76e5a18d6c45463c6e2f7a339229d807">&#9670;&nbsp;</a></span>client_close_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void client_close_signal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function closes the client's socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>- The signal that was received </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00083">83</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a76e5a18d6c45463c6e2f7a339229d807_icgraph.png" border="0" usemap="#avsync__test_8cpp_a76e5a18d6c45463c6e2f7a339229d807_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a76e5a18d6c45463c6e2f7a339229d807_icgraph" id="avsync__test_8cpp_a76e5a18d6c45463c6e2f7a339229d807_icgraph">
<area shape="rect" title="This function closes the client&#39;s socket." alt="" coords="108,5,253,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="a2d575aeb5e2785705d4383ffea88b270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d575aeb5e2785705d4383ffea88b270">&#9670;&nbsp;</a></span>print_vsyncs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_vsyncs </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function prints out the last N vsyncs that the system has received either on its own or from another system. It will only print in DBG mnode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*msg</td><td>- Any prefix message to be printed. </td></tr>
    <tr><td class="paramname">*va</td><td>- The array of vsyncs </td></tr>
    <tr><td class="paramname">sz</td><td>- The size of this array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00099">99</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a2d575aeb5e2785705d4383ffea88b270_icgraph.png" border="0" usemap="#avsync__test_8cpp_a2d575aeb5e2785705d4383ffea88b270_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a2d575aeb5e2785705d4383ffea88b270_icgraph" id="avsync__test_8cpp_a2d575aeb5e2785705d4383ffea88b270_icgraph">
<area shape="rect" title="This function prints out the last N vsyncs that the system has received either on its own or from ano..." alt="" coords="389,31,493,57"/>
<area shape="rect" href="vsync__test_8cpp.html#a30f13cb2b111df5e72d2c977803a52ce" title="This function is used by the server side to get last 10 vsyncs, send them to the client and receive a..." alt="" coords="268,5,341,32"/>
<area shape="rect" href="vsync__test_8cpp.html#aaf4da81aa0bbd7eeb5c7094d4decd35d" title="This function takes all the actions of the secondary system which are to initialize the client,..." alt="" coords="108,56,220,83"/>
<area shape="rect" href="vsync__test_8cpp.html#a2b051595562e86bcc7ae070fc4f4f3a6" title="This function takes all the actions of the primary system which are to initialize the server,..." alt="" coords="116,5,212,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,31,60,57"/>
</map>
</div>

</div>
</div>
<a id="a7b625e8a9a83c76fb85606039a5051ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b625e8a9a83c76fb85606039a5051ad">&#9670;&nbsp;</a></span>find_avg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long find_avg </td>
          <td>(</td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function finds the average of all the vertical syncs that have been provided by the primary system to the secondary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*va</td><td>- The array holding all the vertical syncs of the primary system </td></tr>
    <tr><td class="paramname">sz</td><td>- The size of this array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The average of the vertical syncs </dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00115">115</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a7b625e8a9a83c76fb85606039a5051ad_icgraph.png" border="0" usemap="#avsync__test_8cpp_a7b625e8a9a83c76fb85606039a5051ad_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a7b625e8a9a83c76fb85606039a5051ad_icgraph" id="avsync__test_8cpp_a7b625e8a9a83c76fb85606039a5051ad_icgraph">
<area shape="rect" title="This function finds the average of all the vertical syncs that have been provided by the primary syst..." alt="" coords="268,5,345,32"/>
<area shape="rect" href="vsync__test_8cpp.html#aaf4da81aa0bbd7eeb5c7094d4decd35d" title="This function takes all the actions of the secondary system which are to initialize the client,..." alt="" coords="108,5,220,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="a30f13cb2b111df5e72d2c977803a52ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30f13cb2b111df5e72d2c977803a52ce">&#9670;&nbsp;</a></span>do_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_msg </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_sockfd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used by the server side to get last 10 vsyncs, send them to the client and receive an ACK from it. Once reveived, it terminates connection with the client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_sockfd</td><td>- The socket on which we need to communicate with the client </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 = SUCCESS</li>
<li>1 = FAILURE </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00134">134</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_cgraph.png" border="0" usemap="#avsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_cgraph" alt=""/></div>
<map name="avsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_cgraph" id="avsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_cgraph">
<area shape="rect" title="This function is used by the server side to get last 10 vsyncs, send them to the client and receive a..." alt="" coords="5,208,79,235"/>
<area shape="rect" href="classmsg.html#a2fd09f5f1b1b1a4520bbe5bda12c711c" title=" " alt="" coords="154,5,273,32"/>
<area shape="rect" href="classmsg.html#a4f27d8dcfc1b176228c9beb32fd9904f" title=" " alt="" coords="150,56,277,83"/>
<area shape="rect" href="classmsg.html#a4e2cef31d72aef6c076dd9ca0c8491e7" title=" " alt="" coords="156,107,271,133"/>
<area shape="rect" href="classmsg.html#a213e463e2f59d260448a163eb060bf26" title=" " alt="" coords="162,157,265,184"/>
<area shape="rect" href="classmsg.html#a5a9a59ba1990ba6912d7d5dd0973f1d0" title=" " alt="" coords="127,208,300,235"/>
<area shape="rect" href="vsyncalter_8h.html#ac60432ce7a758749c9a717e9e7668850" title="This function gets a list of vsyncs for the number of times indicated by the caller and provide their..." alt="" coords="169,259,257,285"/>
<area shape="rect" href="vsync__test_8cpp.html#a2d575aeb5e2785705d4383ffea88b270" title="This function prints out the last N vsyncs that the system has received either on its own or from ano..." alt="" coords="161,309,265,336"/>
<area shape="rect" href="classconnection.html#a1ff5f4909852c11dbea214bb7e4b708e" title=" " alt="" coords="131,360,295,387"/>
<area shape="rect" href="classconnection.html#ab01fb91d5a4897cc26dd81ca1dfdf0f2" title=" " alt="" coords="130,411,297,437"/>
<area shape="rect" href="vsyncalter_8cpp.html#a207d247b175aba8213284ecf344ddd77" title="This function closes an open handle." alt="" coords="392,157,499,184"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa4cbfb6dcebfe97b9923cbc44394cc1f" title="This function opens /dev/dri/card0." alt="" coords="393,208,497,235"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa5b2359b39d48f12b1e5698243aa677c" title="This function determines the type of vblank synchronization to use for the output." alt="" coords="591,284,721,311"/>
<area shape="rect" href="vsyncalter_8cpp.html#a109e6f287d9b9dccd010bbeceaab32e8" title="The function which will be called whenever a VBLANK occurs." alt="" coords="384,309,507,336"/>
<area shape="rect" href="classconnection.html#a8d26a5bf6691a16c27825b70debcd32d" title="This function receives a message to the other system using the recv API." alt="" coords="348,360,543,387"/>
<area shape="rect" href="classconnection.html#a535d212e860d1a615e69f524ad91a274" title="This function sends a message to the other system using the send API." alt="" coords="355,411,535,437"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_icgraph.png" border="0" usemap="#avsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_icgraph" id="avsync__test_8cpp_a30f13cb2b111df5e72d2c977803a52ce_icgraph">
<area shape="rect" title="This function is used by the server side to get last 10 vsyncs, send them to the client and receive a..." alt="" coords="252,5,325,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a2b051595562e86bcc7ae070fc4f4f3a6" title="This function takes all the actions of the primary system which are to initialize the server,..." alt="" coords="108,5,204,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="a2b051595562e86bcc7ae070fc4f4f3a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b051595562e86bcc7ae070fc4f4f3a6">&#9670;&nbsp;</a></span>do_primary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_primary </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ptp_if</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function takes all the actions of the primary system which are to initialize the server, wait for any clients, dispatch a function to handle each client and then wait for another client to join until the user Ctrl+C's out. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*ptp_if</td><td>- This is the PTP interface provided by the user on command line. It can also be NULL, in which case they would rather have us communicate via TCP. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 = SUCCESS</li>
<li>1 = FAILURE </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00182">182</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_cgraph.png" border="0" usemap="#avsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_cgraph" alt=""/></div>
<map name="avsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_cgraph" id="avsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_cgraph">
<area shape="rect" title="This function takes all the actions of the primary system which are to initialize the server,..." alt="" coords="5,360,101,387"/>
<area shape="rect" href="classconnection.html#aefcffb00d8835dfed032313cbd292c07" title="This function waits until a client connects to it. It uses the accept API to listen in for any incomi..." alt="" coords="163,193,307,234"/>
<area shape="rect" href="vsync__test_8cpp.html#a30f13cb2b111df5e72d2c977803a52ce" title="This function is used by the server side to get last 10 vsyncs, send them to the client and receive a..." alt="" coords="198,259,271,285"/>
<area shape="rect" href="classconnection.html#a96130f5b9d6d63d51c35dc746988e8cc" title="This function initalizes the server by opening a socket, binding the server and listening for any inc..." alt="" coords="149,487,320,513"/>
<area shape="rect" href="vsync__test_8cpp.html#a39b58a2a7bc1057f428bb132a1f46fe7" title="This function closes the server&#39;s socket." alt="" coords="159,563,310,589"/>
<area shape="rect" href="classmsg.html#a2fd09f5f1b1b1a4520bbe5bda12c711c" title=" " alt="" coords="400,5,519,32"/>
<area shape="rect" href="classmsg.html#a4f27d8dcfc1b176228c9beb32fd9904f" title=" " alt="" coords="396,56,523,83"/>
<area shape="rect" href="classmsg.html#a4e2cef31d72aef6c076dd9ca0c8491e7" title=" " alt="" coords="402,107,517,133"/>
<area shape="rect" href="classmsg.html#a213e463e2f59d260448a163eb060bf26" title=" " alt="" coords="408,157,511,184"/>
<area shape="rect" href="classmsg.html#a5a9a59ba1990ba6912d7d5dd0973f1d0" title=" " alt="" coords="373,208,546,235"/>
<area shape="rect" href="vsyncalter_8h.html#ac60432ce7a758749c9a717e9e7668850" title="This function gets a list of vsyncs for the number of times indicated by the caller and provide their..." alt="" coords="415,259,503,285"/>
<area shape="rect" href="vsync__test_8cpp.html#a2d575aeb5e2785705d4383ffea88b270" title="This function prints out the last N vsyncs that the system has received either on its own or from ano..." alt="" coords="407,309,511,336"/>
<area shape="rect" href="classconnection.html#a1ff5f4909852c11dbea214bb7e4b708e" title=" " alt="" coords="377,360,541,387"/>
<area shape="rect" href="classconnection.html#ab01fb91d5a4897cc26dd81ca1dfdf0f2" title=" " alt="" coords="376,411,543,437"/>
<area shape="rect" href="vsyncalter_8cpp.html#a207d247b175aba8213284ecf344ddd77" title="This function closes an open handle." alt="" coords="643,157,749,184"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa4cbfb6dcebfe97b9923cbc44394cc1f" title="This function opens /dev/dri/card0." alt="" coords="644,208,748,235"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa5b2359b39d48f12b1e5698243aa677c" title="This function determines the type of vblank synchronization to use for the output." alt="" coords="841,284,972,311"/>
<area shape="rect" href="vsyncalter_8cpp.html#a109e6f287d9b9dccd010bbeceaab32e8" title="The function which will be called whenever a VBLANK occurs." alt="" coords="635,309,757,336"/>
<area shape="rect" href="classconnection.html#a8d26a5bf6691a16c27825b70debcd32d" title="This function receives a message to the other system using the recv API." alt="" coords="599,360,793,387"/>
<area shape="rect" href="classconnection.html#a535d212e860d1a615e69f524ad91a274" title="This function sends a message to the other system using the send API." alt="" coords="606,411,786,437"/>
<area shape="rect" href="classconnection.html#a4b7a7d1ce6ab9f9de9113b59df911503" title="Closes a server&#39;s socket." alt="" coords="368,563,551,589"/>
<area shape="rect" href="classconnection.html#af8f54a105505827800868b3af5ed6300" title="This function opens a TCP socket stream." alt="" coords="368,461,551,488"/>
<area shape="rect" href="classconnection.html#a165e78d186cc8084ea81a2a31a6d0366" title="This function sets server characteristics like portid." alt="" coords="375,512,544,539"/>
<area shape="rect" href="vsyncalter_8h.html#a35dc013212b176f47265e64746fedc0d" title="This function uninitializes the library by closing devices and unmapping memory. It must be called at..." alt="" coords="396,613,523,640"/>
<area shape="rect" href="vsyncalter_8cpp.html#a6c3688799fc62d197fe8e3b25ba950cf" title="This function deallocates all members of the phy_enabled_list." alt="" coords="631,588,761,615"/>
<area shape="rect" href="mmio_8cpp.html#a103c86119a15e95de20a15b3b017def2" title="Unmap the memory range that was mapped during initialization." alt="" coords="620,639,772,665"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_icgraph.png" border="0" usemap="#avsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_icgraph" id="avsync__test_8cpp_a2b051595562e86bcc7ae070fc4f4f3a6_icgraph">
<area shape="rect" title="This function takes all the actions of the primary system which are to initialize the server,..." alt="" coords="108,5,204,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="aaf4da81aa0bbd7eeb5c7094d4decd35d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf4da81aa0bbd7eeb5c7094d4decd35d">&#9670;&nbsp;</a></span>do_secondary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_secondary </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>server_name_or_ip_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ptp_eth_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>synchronize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timestamps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function takes all the actions of the secondary system which are to initialize the client, receive the vsyncs from the server, send it an ack back, finds its own vsync, calculate the delta between the two and then synchronize its vsyncs to the primary systems. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*server_name_or_ip_addr</td><td>- The server's hostname or IP address. In case, the user wants us to communicate over PTP, then this holds the server's PTP interface </td></tr>
    <tr><td class="paramname">*ptp_eth_address</td><td>- In case, the user wants us to communicate over PTP, this holds the server's PTP interfaces' ethernet address. </td></tr>
    <tr><td class="paramname">synchronize</td><td>- Whether to synchronize or not.<ul>
<li>0 = do not synchronize, just exit after getting vblanks</li>
<li>1 = Synchronize once and exit </li>
</ul>
</td></tr>
    <tr><td class="paramname">timestamps</td><td>- How many timestamps to collect for primary and secondary </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 = SUCCESS</li>
<li>1 = FAILURE </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00232">232</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_cgraph.png" border="0" usemap="#avsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_cgraph" alt=""/></div>
<map name="avsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_cgraph" id="avsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_cgraph">
<area shape="rect" title="This function takes all the actions of the secondary system which are to initialize the client,..." alt="" coords="5,284,117,311"/>
<area shape="rect" href="classmsg.html#afd7a95745e29979cf9627a4210e7357d" title=" " alt="" coords="214,5,295,32"/>
<area shape="rect" href="classconnection.html#a3d335b9486ca22756dd42d19220fabf9" title="Closes a client&#39;s connection to the server." alt="" coords="165,56,344,83"/>
<area shape="rect" href="classmsg.html#aca32be687763138892c26f7a2699743b" title=" " alt="" coords="179,107,331,133"/>
<area shape="rect" href="vsync__test_8cpp.html#a7b625e8a9a83c76fb85606039a5051ad" title="This function finds the average of all the vertical syncs that have been provided by the primary syst..." alt="" coords="216,157,293,184"/>
<area shape="rect" href="classmsg.html#a213e463e2f59d260448a163eb060bf26" title=" " alt="" coords="203,208,306,235"/>
<area shape="rect" href="vsyncalter_8h.html#ac60432ce7a758749c9a717e9e7668850" title="This function gets a list of vsyncs for the number of times indicated by the caller and provide their..." alt="" coords="211,259,299,285"/>
<area shape="rect" href="classconnection.html#a60cce1534f624b7db9b09c5377f9fab5" title="This function initalizes the client, by opening the socket and connecting to the server." alt="" coords="172,309,337,336"/>
<area shape="rect" href="vsync__test_8cpp.html#a2d575aeb5e2785705d4383ffea88b270" title="This function prints out the last N vsyncs that the system has received either on its own or from ano..." alt="" coords="203,360,307,387"/>
<area shape="rect" href="classconnection.html#a1ff5f4909852c11dbea214bb7e4b708e" title=" " alt="" coords="173,411,337,437"/>
<area shape="rect" href="classconnection.html#ab01fb91d5a4897cc26dd81ca1dfdf0f2" title=" " alt="" coords="171,461,338,488"/>
<area shape="rect" href="classmsg.html#a6b0ca021f3b4c06146c433bb72e58c31" title=" " alt="" coords="169,512,341,539"/>
<area shape="rect" href="vsyncalter_8h.html#a86e6f93c6e8f6eff1331eaa6b4100262" title="This function synchronizes the primary and secondary systems vsync. It is run on the secondary system..." alt="" coords="182,563,327,589"/>
<area shape="rect" href="vsyncalter_8cpp.html#a207d247b175aba8213284ecf344ddd77" title="This function closes an open handle." alt="" coords="436,107,543,133"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa4cbfb6dcebfe97b9923cbc44394cc1f" title="This function opens /dev/dri/card0." alt="" coords="437,157,541,184"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa5b2359b39d48f12b1e5698243aa677c" title="This function determines the type of vblank synchronization to use for the output." alt="" coords="635,233,765,260"/>
<area shape="rect" href="vsyncalter_8cpp.html#a109e6f287d9b9dccd010bbeceaab32e8" title="The function which will be called whenever a VBLANK occurs." alt="" coords="428,259,551,285"/>
<area shape="rect" href="classconnection.html#af8f54a105505827800868b3af5ed6300" title="This function opens a TCP socket stream." alt="" coords="398,309,581,336"/>
<area shape="rect" href="classconnection.html#ae106c525f92dc8b2edd92e78c835038b" title="pr_inet" alt="" coords="416,360,563,387"/>
<area shape="rect" href="classconnection.html#a165e78d186cc8084ea81a2a31a6d0366" title="This function sets server characteristics like portid." alt="" coords="405,411,574,437"/>
<area shape="rect" href="classconnection.html#a8d26a5bf6691a16c27825b70debcd32d" title="This function receives a message to the other system using the recv API." alt="" coords="392,461,587,488"/>
<area shape="rect" href="classconnection.html#a535d212e860d1a615e69f524ad91a274" title="This function sends a message to the other system using the send API." alt="" coords="399,512,579,539"/>
</map>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_icgraph.png" border="0" usemap="#avsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_icgraph" alt=""/></div>
<map name="avsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_icgraph" id="avsync__test_8cpp_aaf4da81aa0bbd7eeb5c7094d4decd35d_icgraph">
<area shape="rect" title="This function takes all the actions of the secondary system which are to initialize the client,..." alt="" coords="108,5,220,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="This is the main function." alt="" coords="5,5,60,32"/>
</map>
</div>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the main function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>- The number of command line arguments </td></tr>
    <tr><td class="paramname">*argv[]</td><td>- Each command line argument in an array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 = SUCCESS</li>
<li>1 = FAILURE </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00358">358</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="vsync__test_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#avsync__test_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="avsync__test_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="avsync__test_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title="This is the main function." alt="" coords="5,779,60,805"/>
<area shape="rect" href="vsync__test_8cpp.html#a76e5a18d6c45463c6e2f7a339229d807" title="This function closes the client&#39;s socket." alt="" coords="108,233,253,260"/>
<area shape="rect" href="classconnection.html#a3d335b9486ca22756dd42d19220fabf9" title="Closes a client&#39;s connection to the server." alt="" coords="500,5,679,32"/>
<area shape="rect" href="vsync__test_8cpp.html#a2b051595562e86bcc7ae070fc4f4f3a6" title="This function takes all the actions of the primary system which are to initialize the server,..." alt="" coords="133,779,229,805"/>
<area shape="rect" href="vsyncalter_8h.html#a35dc013212b176f47265e64746fedc0d" title="This function uninitializes the library by closing devices and unmapping memory. It must be called at..." alt="" coords="526,917,653,944"/>
<area shape="rect" href="vsync__test_8cpp.html#aaf4da81aa0bbd7eeb5c7094d4decd35d" title="This function takes all the actions of the secondary system which are to initialize the client,..." alt="" coords="321,335,433,361"/>
<area shape="rect" href="vsync__test_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0" title="Prints the usage of the program." alt="" coords="150,1019,211,1045"/>
<area shape="rect" href="vsyncalter_8h.html#a1ccc7c011ad035e21d4367fc5dcb412c" title="This function initializes the library. It must be called ahead of all other functions because it open..." alt="" coords="321,993,432,1020"/>
<area shape="rect" href="classconnection.html#aefcffb00d8835dfed032313cbd292c07" title="This function waits until a client connects to it. It uses the accept API to listen in for any incomi..." alt="" coords="305,801,449,842"/>
<area shape="rect" href="vsync__test_8cpp.html#a30f13cb2b111df5e72d2c977803a52ce" title="This function is used by the server side to get last 10 vsyncs, send them to the client and receive a..." alt="" coords="340,588,413,615"/>
<area shape="rect" href="classconnection.html#a96130f5b9d6d63d51c35dc746988e8cc" title="This function initalizes the server by opening a socket, binding the server and listening for any inc..." alt="" coords="504,816,675,843"/>
<area shape="rect" href="vsync__test_8cpp.html#a39b58a2a7bc1057f428bb132a1f46fe7" title="This function closes the server&#39;s socket." alt="" coords="301,867,452,893"/>
<area shape="rect" href="classmsg.html#a2fd09f5f1b1b1a4520bbe5bda12c711c" title=" " alt="" coords="530,613,649,640"/>
<area shape="rect" href="classmsg.html#a4f27d8dcfc1b176228c9beb32fd9904f" title=" " alt="" coords="526,664,653,691"/>
<area shape="rect" href="classmsg.html#a4e2cef31d72aef6c076dd9ca0c8491e7" title=" " alt="" coords="532,715,647,741"/>
<area shape="rect" href="classmsg.html#a213e463e2f59d260448a163eb060bf26" title=" " alt="" coords="538,512,641,539"/>
<area shape="rect" href="classmsg.html#a5a9a59ba1990ba6912d7d5dd0973f1d0" title=" " alt="" coords="503,765,676,792"/>
<area shape="rect" href="vsyncalter_8h.html#ac60432ce7a758749c9a717e9e7668850" title="This function gets a list of vsyncs for the number of times indicated by the caller and provide their..." alt="" coords="545,411,633,437"/>
<area shape="rect" href="vsync__test_8cpp.html#a2d575aeb5e2785705d4383ffea88b270" title="This function prints out the last N vsyncs that the system has received either on its own or from ano..." alt="" coords="537,563,641,589"/>
<area shape="rect" href="classconnection.html#a1ff5f4909852c11dbea214bb7e4b708e" title=" " alt="" coords="507,309,671,336"/>
<area shape="rect" href="classconnection.html#ab01fb91d5a4897cc26dd81ca1dfdf0f2" title=" " alt="" coords="506,360,673,387"/>
<area shape="rect" href="vsyncalter_8cpp.html#a207d247b175aba8213284ecf344ddd77" title="This function closes an open handle." alt="" coords="771,411,877,437"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa4cbfb6dcebfe97b9923cbc44394cc1f" title="This function opens /dev/dri/card0." alt="" coords="772,461,876,488"/>
<area shape="rect" href="vsyncalter_8cpp.html#aa5b2359b39d48f12b1e5698243aa677c" title="This function determines the type of vblank synchronization to use for the output." alt="" coords="969,436,1100,463"/>
<area shape="rect" href="vsyncalter_8cpp.html#a109e6f287d9b9dccd010bbeceaab32e8" title="The function which will be called whenever a VBLANK occurs." alt="" coords="763,360,885,387"/>
<area shape="rect" href="classconnection.html#a8d26a5bf6691a16c27825b70debcd32d" title="This function receives a message to the other system using the recv API." alt="" coords="727,259,921,285"/>
<area shape="rect" href="classconnection.html#a535d212e860d1a615e69f524ad91a274" title="This function sends a message to the other system using the send API." alt="" coords="734,309,914,336"/>
<area shape="rect" href="classconnection.html#a4b7a7d1ce6ab9f9de9113b59df911503" title="Closes a server&#39;s socket." alt="" coords="733,841,915,868"/>
<area shape="rect" href="classconnection.html#af8f54a105505827800868b3af5ed6300" title="This function opens a TCP socket stream." alt="" coords="733,740,915,767"/>
<area shape="rect" href="classconnection.html#a165e78d186cc8084ea81a2a31a6d0366" title="This function sets server characteristics like portid." alt="" coords="739,639,909,665"/>
<area shape="rect" href="vsyncalter_8cpp.html#a6c3688799fc62d197fe8e3b25ba950cf" title="This function deallocates all members of the phy_enabled_list." alt="" coords="759,968,889,995"/>
<area shape="rect" href="mmio_8cpp.html#a103c86119a15e95de20a15b3b017def2" title="Unmap the memory range that was mapped during initialization." alt="" coords="748,917,900,944"/>
<area shape="rect" href="classmsg.html#afd7a95745e29979cf9627a4210e7357d" title=" " alt="" coords="549,56,630,83"/>
<area shape="rect" href="classmsg.html#aca32be687763138892c26f7a2699743b" title=" " alt="" coords="513,107,665,133"/>
<area shape="rect" href="vsync__test_8cpp.html#a7b625e8a9a83c76fb85606039a5051ad" title="This function finds the average of all the vertical syncs that have been provided by the primary syst..." alt="" coords="551,157,628,184"/>
<area shape="rect" href="classconnection.html#a60cce1534f624b7db9b09c5377f9fab5" title="This function initalizes the client, by opening the socket and connecting to the server." alt="" coords="507,461,672,488"/>
<area shape="rect" href="classmsg.html#a6b0ca021f3b4c06146c433bb72e58c31" title=" " alt="" coords="503,208,675,235"/>
<area shape="rect" href="vsyncalter_8h.html#a86e6f93c6e8f6eff1331eaa6b4100262" title="This function synchronizes the primary and secondary systems vsync. It is run on the secondary system..." alt="" coords="517,259,662,285"/>
<area shape="rect" href="classconnection.html#ae106c525f92dc8b2edd92e78c835038b" title="pr_inet" alt="" coords="751,563,897,589"/>
<area shape="rect" href="version_8h.html#a6ef921a348915285474cdcd5894c6d1c" title="Constructs a version string from major, minor, and patch numbers." alt="" coords="327,1044,426,1071"/>
<area shape="rect" href="vsyncalter_8cpp.html#a4e6e0eb077dbbca33e1b46831375abd8" title=" " alt="" coords="518,1120,661,1147"/>
<area shape="rect" href="mmio_8cpp.html#aba63761c97bf3ce8d09b95186f08d487" title="This functions gets the deivce ID of the device." alt="" coords="533,1069,645,1096"/>
<area shape="rect" href="mmio_8cpp.html#a27c965f14e3b33dbdaae56d707dc39f4" title="This functions maps the MMIO region." alt="" coords="541,1019,637,1045"/>
<area shape="rect" href="vsyncalter_8cpp.html#a35dc013212b176f47265e64746fedc0d" title="This function uninitializes the library by closing devices and unmapping memory. It must be called at..." alt="" coords="526,968,653,995"/>
<area shape="rect" href="classphys.html#ad3682305151b6fe10b2ecf771282fa8a" title=" " alt="" coords="774,1171,874,1197"/>
<area shape="rect" href="classphys.html#ae3f11f89d561c45ec9233729f4382733" title=" " alt="" coords="766,1120,882,1147"/>
<area shape="rect" href="mmio_8cpp.html#a2fbf38be7295d345a8dd72b4c618cf4f" title="Looks up the main graphics pci device using libpciaccess." alt="" coords="747,1069,901,1096"/>
<area shape="rect" href="mmio_8cpp.html#ada91c2b510d23f69cb4af413ffc9384d" title="Fill a mmio_data stucture with igt_mmio to point at the mmio bar." alt="" coords="734,1019,914,1045"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6eb3855acc3b4bd74652ede542006355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eb3855acc3b4bd74652ede542006355">&#9670;&nbsp;</a></span>server</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classconnection.html">connection</a>* server</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00037">37</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>

</div>
</div>
<a id="aa55937eddaa937c68b6bddd2655f4edd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa55937eddaa937c68b6bddd2655f4edd">&#9670;&nbsp;</a></span>client</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classconnection.html">connection</a> * client</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00037">37</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>

</div>
</div>
<a id="ad35bfa481fb24b59bf55f9547e474447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad35bfa481fb24b59bf55f9547e474447">&#9670;&nbsp;</a></span>client_done</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int client_done = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vsync__test_8cpp_source.html#l00038">38</a> of file <a class="el" href="vsync__test_8cpp_source.html">vsync_test.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_13e138d54eb8818da29c3992edef070a.html">test</a></li><li class="navelem"><a class="el" href="vsync__test_8cpp.html">vsync_test.cpp</a></li>
    <li class="footer">Generated on Wed Jun 5 2024 23:23:15 for Software Genlock by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
